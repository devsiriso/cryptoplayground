const COINS_TO_FETCH =
  'BTC, ETH, BNB, USDP,BTC,TRX,TEL,BNB,ETC,USDP,DOGE,ADA,SOL,USDT,BCH';
const API_KEY = process.env.REACT_APP_API_KEY;
const URL = `https://api.nomics.com/v1/currencies/ticker?key=${API_KEY}&ids=${COINS_TO_FETCH}&interval=1d,30d&per-page=100&page=1`;

let lastFetch = new Date();

export const getCoinsFromApi = async (toast) => {
  // This could definitely use improvement. 
  let response = [];
   try {
    response = fetch(URL, { mode: 'cors' });
    toast({
      description: 'Successfully retrieved market information.',
      status: 'success',
      duration: 2000,
    });
   } catch (e) {
      toast({
      description: 'Failed to retrieve market information.',
      status: 'error',
      duration: 2000,
    });
   } finally {
     lastFetch = new Date();
     return await response;
   }
    
}

export const getLastFetchDate = () => {
  return lastFetch;
}

export const getDebugCoins = () => {
  return [
    {
      "id": "BTC",
      "currency": "BTC",
      "symbol": "BTC",
      "name": "Bitcoin",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/btc.svg",
      "status": "active",
      "price": "43539.32296268",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "18824787",
      "max_supply": "21000000",
      "market_cap": "819618480897",
      "market_cap_dominance": "0.3654",
      "num_exchanges": "390",
      "num_pairs": "64849",
      "num_pairs_unmapped": "5160",
      "first_candle": "2011-08-18T00:00:00Z",
      "first_trade": "2011-08-18T00:00:00Z",
      "first_order_book": "2017-01-06T00:00:00Z",
      "rank": "1",
      "rank_delta": "0",
      "high": "63598.73868241",
      "high_timestamp": "2021-04-13T00:00:00Z",
      "1d": {
        "volume": "45352505314.50",
        "price_change": "-522.64002360",
        "price_change_pct": "-0.0119",
        "volume_change": "-3583129893.68",
        "volume_change_pct": "-0.0732",
        "market_cap_change": "-9793687981.70",
        "market_cap_change_pct": "-0.0118"
      },
      "30d": {
        "volume": "1491758244857.97",
        "price_change": "-5526.88036051",
        "price_change_pct": "-0.1126",
        "volume_change": "16917821577.67",
        "volume_change_pct": "0.0115",
        "market_cap_change": "-102674036349.03",
        "market_cap_change_pct": "-0.1113"
      }
    },
    {
      "id": "ETH",
      "currency": "ETH",
      "symbol": "ETH",
      "name": "Ethereum",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/eth.svg",
      "status": "active",
      "price": "2921.37084521",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "117653290",
      "market_cap": "343708891794",
      "market_cap_dominance": "0.1532",
      "num_exchanges": "413",
      "num_pairs": "50428",
      "num_pairs_unmapped": "40929",
      "first_candle": "2015-08-07T00:00:00Z",
      "first_trade": "2015-08-07T00:00:00Z",
      "first_order_book": "2018-08-29T00:00:00Z",
      "rank": "2",
      "rank_delta": "0",
      "high": "4180.56890844",
      "high_timestamp": "2021-05-11T00:00:00Z",
      "1d": {
        "volume": "29779798915.48",
        "price_change": "-194.10967402",
        "price_change_pct": "-0.0623",
        "volume_change": "-7067356892.94",
        "volume_change_pct": "-0.1918",
        "market_cap_change": "-22796047608.97",
        "market_cap_change_pct": "-0.0622"
      },
      "30d": {
        "volume": "1174569098371.40",
        "price_change": "-311.46381245",
        "price_change_pct": "-0.0963",
        "volume_change": "-27610952573.70",
        "volume_change_pct": "-0.0230",
        "market_cap_change": "-35335799884.53",
        "market_cap_change_pct": "-0.0932"
      }
    },
    {
      "id": "ADA",
      "currency": "ADA",
      "symbol": "ADA",
      "name": "Cardano",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/ada.svg",
      "status": "active",
      "price": "2.20865681",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "32066390668",
      "max_supply": "45000000000",
      "market_cap": "70823652120",
      "market_cap_dominance": "0.0316",
      "num_exchanges": "121",
      "num_pairs": "386",
      "num_pairs_unmapped": "1",
      "first_candle": "2017-10-01T00:00:00Z",
      "first_trade": "2017-11-22T00:00:00Z",
      "first_order_book": "2018-08-29T00:00:00Z",
      "rank": "4",
      "rank_delta": "0",
      "high": "2.96772168",
      "high_timestamp": "2021-09-03T00:00:00Z",
      "1d": {
        "volume": "4162374257.06",
        "price_change": "-0.031120154",
        "price_change_pct": "-0.0139",
        "volume_change": "-1050196057.08",
        "volume_change_pct": "-0.2015",
        "market_cap_change": "-997911009.48",
        "market_cap_change_pct": "-0.0139"
      },
      "30d": {
        "volume": "189552381499.00",
        "price_change": "-0.53550694",
        "price_change_pct": "-0.1951",
        "volume_change": "39559842367.14",
        "volume_change_pct": "0.2637",
        "market_cap_change": "-17171774729.55",
        "market_cap_change_pct": "-0.1951"
      }
    },
    {
      "id": "USDT",
      "currency": "USDT",
      "symbol": "USDT",
      "name": "Tether",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/usdt.svg",
      "status": "active",
      "price": "1.00461343",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "69464706756",
      "market_cap": "69785177180",
      "market_cap_dominance": "0.0311",
      "num_exchanges": "348",
      "num_pairs": "42051",
      "num_pairs_unmapped": "10326",
      "first_candle": "2013-12-27T00:00:00Z",
      "first_trade": "2013-12-27T00:00:00Z",
      "first_order_book": "2018-08-29T00:00:00Z",
      "rank": "5",
      "rank_delta": "0",
      "high": "1.09051683",
      "high_timestamp": "2017-12-23T00:00:00Z",
      "1d": {
        "volume": "89451371426.52",
        "price_change": "0.0035461025",
        "price_change_pct": "0.0035",
        "volume_change": "-12597968750.19",
        "volume_change_pct": "-0.1234",
        "market_cap_change": "189368240.63",
        "market_cap_change_pct": "0.0027"
      },
      "30d": {
        "volume": "3288575604995.19",
        "price_change": "0.0025974482",
        "price_change_pct": "0.0026",
        "volume_change": "282576070172.17",
        "volume_change_pct": "0.0940",
        "market_cap_change": "3859104042.05",
        "market_cap_change_pct": "0.0585"
      }
    },
    {
      "id": "BNB",
      "currency": "BNB",
      "symbol": "BNB",
      "name": "Binance Coin",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/bnb.svg",
      "status": "active",
      "price": "357.04858335",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "154533652",
      "max_supply": "170533652",
      "market_cap": "55176021491",
      "market_cap_dominance": "0.0246",
      "num_exchanges": "156",
      "num_pairs": "8222",
      "num_pairs_unmapped": "353411",
      "first_candle": "2017-07-14T00:00:00Z",
      "first_trade": "2017-07-14T00:00:00Z",
      "first_order_book": "2018-08-29T00:00:00Z",
      "rank": "6",
      "rank_delta": "0",
      "high": "677.20756414",
      "high_timestamp": "2021-05-03T00:00:00Z",
      "1d": {
        "volume": "2129380062.11",
        "price_change": "-19.94961336",
        "price_change_pct": "-0.0529",
        "volume_change": "-215035358.97",
        "volume_change_pct": "-0.0917",
        "market_cap_change": "-3082886607.15",
        "market_cap_change_pct": "-0.0529"
      },
      "30d": {
        "volume": "82932126289.26",
        "price_change": "-147.77201802",
        "price_change_pct": "-0.2927",
        "volume_change": "2282443152.37",
        "volume_change_pct": "0.0283",
        "market_cap_change": "-22835749593.95",
        "market_cap_change_pct": "-0.2927"
      }
    },
    {
      "id": "SOL",
      "currency": "SOL",
      "symbol": "SOL",
      "name": "Solana",
      "logo_url": "https://nomics-api.s3.us-east-2.amazonaws.com/static/images/currencies/SOL2.jpg",
      "status": "active",
      "price": "137.55194696",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "297281762",
      "max_supply": "488630611",
      "market_cap": "40891685151",
      "market_cap_dominance": "0.0182",
      "num_exchanges": "68",
      "num_pairs": "156",
      "num_pairs_unmapped": "18",
      "first_candle": "2020-04-07T00:00:00Z",
      "first_trade": "2020-04-10T00:00:00Z",
      "first_order_book": "2020-04-07T00:00:00Z",
      "rank": "8",
      "rank_delta": "0",
      "high": "191.67750899",
      "high_timestamp": "2021-09-08T00:00:00Z",
      "1d": {
        "volume": "4654568119.93",
        "price_change": "-10.00717982",
        "price_change_pct": "-0.0678",
        "volume_change": "-1866928878.14",
        "volume_change_pct": "-0.2863",
        "market_cap_change": "-2954744822.44",
        "market_cap_change_pct": "-0.0674"
      },
      "30d": {
        "volume": "232968562054.01",
        "price_change": "65.42554451",
        "price_change_pct": "0.9071",
        "volume_change": "183538341177.68",
        "volume_change_pct": "3.7131",
        "market_cap_change": "19927259878.02",
        "market_cap_change_pct": "0.9505"
      }
    },
    {
      "id": "DOGE",
      "currency": "DOGE",
      "symbol": "DOGE",
      "name": "Dogecoin",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/doge.svg",
      "status": "active",
      "price": "0.21049496",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "131419507714",
      "market_cap": "27663144410",
      "market_cap_dominance": "0.0123",
      "num_exchanges": "208",
      "num_pairs": "2845",
      "num_pairs_unmapped": "1001",
      "first_candle": "2014-01-21T00:00:00Z",
      "first_trade": "2014-01-21T00:00:00Z",
      "first_order_book": "2018-09-12T00:00:00Z",
      "rank": "11",
      "rank_delta": "0",
      "high": "0.68819615",
      "high_timestamp": "2021-05-07T00:00:00Z",
      "1d": {
        "volume": "1737822716.64",
        "price_change": "-0.012811683",
        "price_change_pct": "-0.0574",
        "volume_change": "-766920737.76",
        "volume_change_pct": "-0.3062",
        "market_cap_change": "-1680665774.12",
        "market_cap_change_pct": "-0.0573"
      },
      "30d": {
        "volume": "86829476874.97",
        "price_change": "-0.082653911",
        "price_change_pct": "-0.2820",
        "volume_change": "-66791143949.08",
        "volume_change_pct": "-0.4348",
        "market_cap_change": "-10741903454.83",
        "market_cap_change_pct": "-0.2797"
      }
    },
    {
      "id": "BCH",
      "currency": "BCH",
      "symbol": "BCH",
      "name": "Bitcoin Cash",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/BCH.png",
      "status": "active",
      "price": "515.22594317",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "18854262",
      "max_supply": "21000000",
      "market_cap": "9714205126",
      "market_cap_dominance": "0.0043",
      "num_exchanges": "264",
      "num_pairs": "1820",
      "num_pairs_unmapped": "124",
      "first_candle": "2017-07-09T00:00:00Z",
      "first_trade": "2017-07-27T00:00:00Z",
      "first_order_book": "2018-08-29T00:00:00Z",
      "rank": "20",
      "rank_delta": "1",
      "high": "3716.99385996",
      "high_timestamp": "2017-12-20T00:00:00Z",
      "1d": {
        "volume": "2815292488.48",
        "price_change": "-27.67812507",
        "price_change_pct": "-0.0510",
        "volume_change": "-157900024.28",
        "volume_change_pct": "-0.0531",
        "market_cap_change": "-521406130.03",
        "market_cap_change_pct": "-0.0509"
      },
      "30d": {
        "volume": "108299039463.53",
        "price_change": "-135.64111502",
        "price_change_pct": "-0.2084",
        "volume_change": "5994537226.97",
        "volume_change_pct": "0.0586",
        "market_cap_change": "-2539689250.84",
        "market_cap_change_pct": "-0.2073"
      }
    },
    {
      "id": "TRX",
      "currency": "TRX",
      "symbol": "TRX",
      "name": "TRON",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/TRX.svg",
      "status": "active",
      "price": "0.092546564",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "71660220128",
      "max_supply": "100850743812",
      "market_cap": "6631907134",
      "market_cap_dominance": "0.0030",
      "num_exchanges": "197",
      "num_pairs": "1914",
      "num_pairs_unmapped": "14874",
      "first_candle": "2017-10-06T00:00:00Z",
      "first_trade": "2017-10-06T00:00:00Z",
      "first_order_book": "2018-08-29T00:00:00Z",
      "rank": "27",
      "rank_delta": "0",
      "high": "0.20711340",
      "high_timestamp": "2018-01-04T00:00:00Z",
      "1d": {
        "volume": "1278850168.00",
        "price_change": "-0.0055775192",
        "price_change_pct": "-0.0568",
        "volume_change": "-419005979.66",
        "volume_change_pct": "-0.2468",
        "market_cap_change": "-399686253.91",
        "market_cap_change_pct": "-0.0568"
      },
      "30d": {
        "volume": "68624129619.09",
        "price_change": "0.0049035651",
        "price_change_pct": "0.0559",
        "volume_change": "21633598309.65",
        "volume_change_pct": "0.4604",
        "market_cap_change": "351390555.64",
        "market_cap_change_pct": "0.0559"
      }
    },
    {
      "id": "ETC",
      "currency": "ETC",
      "symbol": "ETC",
      "name": "Ethereum Classic",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/etc.svg",
      "status": "active",
      "price": "47.22818162",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:36:00Z",
      "circulating_supply": "130244121",
      "max_supply": "210700000",
      "market_cap": "6151193003",
      "market_cap_dominance": "0.0027",
      "num_exchanges": "157",
      "num_pairs": "658",
      "num_pairs_unmapped": "103",
      "first_candle": "2016-07-24T00:00:00Z",
      "first_trade": "2016-07-24T00:00:00Z",
      "first_order_book": "2018-08-29T00:00:00Z",
      "rank": "29",
      "rank_delta": "0",
      "high": "134.89889631",
      "high_timestamp": "2021-05-06T00:00:00Z",
      "1d": {
        "volume": "938896815.76",
        "price_change": "-3.42482740",
        "price_change_pct": "-0.0676",
        "volume_change": "-122959246.97",
        "volume_change_pct": "-0.1158",
        "market_cap_change": "-445037979.37",
        "market_cap_change_pct": "-0.0675"
      },
      "30d": {
        "volume": "59145156300.69",
        "price_change": "-16.66457112",
        "price_change_pct": "-0.2608",
        "volume_change": "-25373386389.98",
        "volume_change_pct": "-0.3002",
        "market_cap_change": "-2102666800.28",
        "market_cap_change_pct": "-0.2547"
      }
    },
    {
      "id": "TEL",
      "currency": "TEL",
      "symbol": "TEL",
      "name": "Telcoin",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/tel.svg",
      "status": "active",
      "price": "0.016435141",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:35:00Z",
      "circulating_supply": "56989406904",
      "max_supply": "100000000000",
      "market_cap": "936628914",
      "market_cap_dominance": "0.0004",
      "num_exchanges": "19",
      "num_pairs": "34",
      "num_pairs_unmapped": "0",
      "first_candle": "2018-01-12T00:00:00Z",
      "first_trade": "2018-01-12T00:00:00Z",
      "first_order_book": "2019-06-05T00:00:00Z",
      "rank": "102",
      "rank_delta": "0",
      "high": "0.060196700",
      "high_timestamp": "2021-05-10T00:00:00Z",
      "1d": {
        "volume": "9869165.82",
        "price_change": "-0.00045903953",
        "price_change_pct": "-0.0272",
        "volume_change": "-4174047.16",
        "volume_change_pct": "-0.2972",
        "market_cap_change": "-26160390.55",
        "market_cap_change_pct": "-0.0272"
      },
      "30d": {
        "volume": "414600161.24",
        "price_change": "-0.0071597173",
        "price_change_pct": "-0.3034",
        "volume_change": "-179794914.10",
        "volume_change_pct": "-0.3025",
        "market_cap_change": "-408028040.39",
        "market_cap_change_pct": "-0.3034"
      }
    },
    {
      "id": "USDP",
      "currency": "USDP",
      "symbol": "USDP",
      "name": "USDP Stablecoin",
      "logo_url": "https://s3.us-east-2.amazonaws.com/nomics-api/static/images/currencies/USDP.png",
      "status": "active",
      "price": "1.00355898",
      "price_date": "2021-09-24T00:00:00Z",
      "price_timestamp": "2021-09-24T09:35:00Z",
      "circulating_supply": "246836120",
      "max_supply": "251637432",
      "market_cap": "247714604",
      "market_cap_dominance": "0.0001",
      "num_exchanges": "14",
      "num_pairs": "45",
      "num_pairs_unmapped": "0",
      "first_candle": "2018-12-12T00:00:00Z",
      "first_trade": "2018-12-12T00:00:00Z",
      "first_order_book": "2021-03-08T00:00:00Z",
      "first_priced_at": "2020-11-28T19:10:48.220246Z",
      "rank": "214",
      "rank_delta": "1",
      "high": "4.52800552",
      "high_timestamp": "2018-12-12T00:00:00Z",
      "1d": {
        "volume": "2957470.63",
        "price_change": "-0.0031949392",
        "price_change_pct": "-0.0032",
        "volume_change": "-827959.37",
        "volume_change_pct": "-0.2187",
        "market_cap_change": "-788626.40",
        "market_cap_change_pct": "-0.0032"
      },
      "30d": {
        "volume": "132388650.92",
        "price_change": "0.0094649902",
        "price_change_pct": "0.0095",
        "volume_change": "-42322985.44",
        "volume_change_pct": "-0.2422",
        "market_cap_change": "2336301.45",
        "market_cap_change_pct": "0.0095"
      }
    }
  ]
}